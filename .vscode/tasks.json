{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "CMake: Configure (Debug)",
      "type": "shell",
      "command": "cmake",
      "args": [
        "-DCMAKE_TOOLCHAIN_FILE=clang-toolchain.cmake",
        "-DCMAKE_BUILD_TYPE=Debug",
        "-DENABLE_TESTING=OFF",
        "-B",
        "build"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "detail": "Configure project with CMake for Debug build"
    },
    {
      "label": "CMake: Configure (Release)",
      "type": "shell",
      "command": "cmake",
      "args": [
        "-DCMAKE_TOOLCHAIN_FILE=clang-toolchain.cmake",
        "-DCMAKE_BUILD_TYPE=Release",
        "-B",
        "build"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "detail": "Configure project with CMake for Release build"
    },
    {
      "label": "CMake: Configure (Debug + Tests)",
      "type": "shell",
      "command": "cmake",
      "args": [
        "-DCMAKE_TOOLCHAIN_FILE=clang-toolchain.cmake",
        "-DCMAKE_BUILD_TYPE=Debug",
        "-DENABLE_TESTING=ON",
        "-B",
        "build-tests"
      ],
      "options": {
        "cwd": "${workspaceFolder}",
        "env": {
          "CPATH": ""
        }
      },
      "problemMatcher": [],
      "detail": "Configure project with CMake for Debug build and GoogleTest"
    },
    {
      "label": "CMake: Build All",
      "type": "shell",
      "command": "cmake",
      "args": ["--build", "build", "-j8"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "problemMatcher": ["$gcc"],
      "detail": "Build all targets using CMake"
    },
    {
      "label": "CMake: Build (Debug + Tests)",
      "type": "shell",
      "command": "cmake",
      "args": ["--build", "build-tests", "-j8"],
      "options": {
        "cwd": "${workspaceFolder}",
        "env": {
          "CPATH": ""
        }
      },
      "group": "build",
      "dependsOn": ["CMake: Configure (Debug + Tests)"],
      "problemMatcher": ["$gcc"],
      "detail": "Build all targets with testing enabled"
    },
    {
      "label": "CMake: Build Active Target",
      "type": "shell",
      "command": "cmake",
      "args": ["--build", "build", "--target", "${input:targetName}", "-j8"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "build",
      "problemMatcher": ["$gcc"],
      "detail": "Build specific target (prompts for target name)"
    },
    {
      "label": "CMake: Clean",
      "type": "shell",
      "command": "cmake",
      "args": ["--build", "build", "--target", "clean"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "detail": "Clean build artifacts"
    },
    {
      "label": "CMake: Clean & Reconfigure (Debug)",
      "type": "shell",
      "command": "sh",
      "args": [
        "-c",
        "cmake -E remove_directory build && cmake -DCMAKE_TOOLCHAIN_FILE=clang-toolchain.cmake -DCMAKE_BUILD_TYPE=Debug -DENABLE_TESTING=OFF -B build"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "detail": "Remove build directory and reconfigure for Debug"
    },
    {
      "label": "CMake: Clean & Reconfigure (Debug + Tests)",
      "type": "shell",
      "command": "sh",
      "args": [
        "-c",
        "cmake -E remove_directory build-tests && cmake -DCMAKE_TOOLCHAIN_FILE=clang-toolchain.cmake -DCMAKE_BUILD_TYPE=Debug -DENABLE_TESTING=ON -B build-tests"
      ],
      "options": {
        "cwd": "${workspaceFolder}",
        "env": {
          "CPATH": ""
        }
      },
      "problemMatcher": [],
      "detail": "Remove build-tests directory and reconfigure for Debug with tests"
    },
    {
      "label": "Run: Select Target",
      "type": "shell",
      "command": "./bin/${input:runTarget}",
      "options": {
        "cwd": "${workspaceFolder}/build"
      },
      "group": {
        "kind": "test",
        "isDefault": true
      },
      "presentation": {
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "clear": true
      },
      "dependsOn": ["CMake: Build All"],
      "problemMatcher": [],
      "detail": "Build and run selected test binary"
    },
    {
      "label": "Test: Run GoogleTest Suite",
      "type": "shell",
      "command": "ctest",
      "args": ["--output-on-failure", "--verbose"],
      "options": {
        "cwd": "${workspaceFolder}/build-tests",
        "env": {
          "CPATH": ""
        }
      },
      "group": "test",
      "dependsOn": ["CMake: Build (Debug + Tests)"],
      "presentation": {
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Run all GoogleTest unit tests (requires ENABLE_TESTING=ON)"
    },
    {
      "label": "Format: clang-format Active File",
      "type": "shell",
      "command": "clang-format",
      "args": ["-i", "${file}"],
      "problemMatcher": [],
      "detail": "Format current file with clang-format"
    },
    {
      "label": "Lint: clang-tidy Active File",
      "type": "shell",
      "command": "clang-tidy",
      "args": ["${file}", "--", "-std=c++20"],
      "problemMatcher": ["$gcc"],
      "detail": "Run clang-tidy on current file"
    }
  ],
  "inputs": [
    {
      "id": "targetName",
      "type": "pickString",
      "description": "Select target to build",
      "options": [
        "test_bst",
        "test_stacks_queues",
        "test_lists",
        "test_avl",
        "test_hash_chaining",
        "test_hash_open_addressing"
      ],
      "default": "test_bst"
    },
    {
      "id": "runTarget",
      "type": "pickString",
      "description": "Select test binary to run",
      "options": [
        "test_Singly_Linked_List",
        "test_Doubly_Linked_List",
        "test_Stacks_Queues",
        "test_Priority_Queue",
        "test_BST",
        "test_BBT",
        "test_AVL",
        "test_RBT",
        "test_Trie",
        "test_Dijkstra",
        "test_Graph_ADJ_List",
        "test_Graph_ADJ_Matrix",
        "test_HashMap",
        "test_Hash_Chaining",
        "test_Hash_Open_Addr",
        "test_Heaps"
      ],
      "default": "test_bst"
    }
  ]
}
