{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "CMake: Configure (Debug)",
      "type": "shell",
      "command": "cmake",
      "args": [
        "-DCMAKE_TOOLCHAIN_FILE=clang-toolchain.cmake",
        "-DCMAKE_BUILD_TYPE=Debug",
        "-B",
        "build"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "detail": "Configure project with CMake for Debug build"
    },
    {
      "label": "CMake: Configure (Release)",
      "type": "shell",
      "command": "cmake",
      "args": [
        "-DCMAKE_TOOLCHAIN_FILE=clang-toolchain.cmake",
        "-DCMAKE_BUILD_TYPE=Release",
        "-B",
        "build"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "detail": "Configure project with CMake for Release build"
    },
    {
      "label": "CMake: Build All",
      "type": "shell",
      "command": "cmake",
      "args": ["--build", "build", "-j8"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "problemMatcher": ["$gcc"],
      "detail": "Build all targets using CMake"
    },
    {
      "label": "CMake: Build Active Target",
      "type": "shell",
      "command": "cmake",
      "args": ["--build", "build", "--target", "${input:targetName}", "-j8"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": "build",
      "problemMatcher": ["$gcc"],
      "detail": "Build specific target (prompts for target name)"
    },
    {
      "label": "CMake: Clean",
      "type": "shell",
      "command": "cmake",
      "args": ["--build", "build", "--target", "clean"],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "detail": "Clean build artifacts"
    },
    {
      "label": "CMake: Clean & Reconfigure (Debug)",
      "type": "shell",
      "command": "rm",
      "args": [
        "-rf",
        "build",
        "&&",
        "cmake",
        "-DCMAKE_TOOLCHAIN_FILE=clang-toolchain.cmake",
        "-DCMAKE_BUILD_TYPE=Debug",
        "-B",
        "build"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "detail": "Remove build directory and reconfigure for Debug"
    },
    {
      "label": "Run: Select Target",
      "type": "shell",
      "command": "./bin/${input:runTarget}",
      "options": {
        "cwd": "${workspaceFolder}/build"
      },
      "group": {
        "kind": "test",
        "isDefault": true
      },
      "presentation": {
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "clear": true
      },
      "dependsOn": ["CMake: Build All"],
      "problemMatcher": [],
      "detail": "Build and run selected test binary"
    },
    {
      "label": "Test: Run GoogleTest Suite",
      "type": "shell",
      "command": "ctest",
      "args": ["--output-on-failure", "--verbose"],
      "options": {
        "cwd": "${workspaceFolder}/build"
      },
      "group": "test",
      "presentation": {
        "reveal": "always",
        "focus": true,
        "panel": "shared"
      },
      "problemMatcher": [],
      "detail": "Run all GoogleTest unit tests (requires ENABLE_TESTING=ON)"
    },
    {
      "label": "Format: clang-format Active File",
      "type": "shell",
      "command": "clang-format",
      "args": ["-i", "${file}"],
      "problemMatcher": [],
      "detail": "Format current file with clang-format"
    },
    {
      "label": "Lint: clang-tidy Active File",
      "type": "shell",
      "command": "clang-tidy",
      "args": ["${file}", "--", "-std=c++20"],
      "problemMatcher": ["$gcc"],
      "detail": "Run clang-tidy on current file"
    }
  ],
  "inputs": [
    {
      "id": "targetName",
      "type": "pickString",
      "description": "Select target to build",
      "options": [
        "test_bst",
        "test_stacks_queues",
        "test_lists",
        "test_avl",
        "test_hash_chaining",
        "test_hash_open_addressing"
      ],
      "default": "test_bst"
    },
    {
      "id": "runTarget",
      "type": "pickString",
      "description": "Select test binary to run",
      "options": [
        "test_avl",
        "test_bst",
        "test_dijkstra",
        "test_graph_adj_list",
        "test_graph_adj_matrix",
        "test_hash_chaining",
        "test_hash_open_addr",
        "test_hashmap",
        "test_heaps",
        "test_lists",
        "test_priority_queue",
        "test_singly_lists",
        "test_stacks_queues"
      ],
      "default": "test_bst"
    }
  ]
}
